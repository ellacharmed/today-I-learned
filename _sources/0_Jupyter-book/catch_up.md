---
jupytext:
  cell_metadata_filter: -all
  formats: md:myst
  text_representation:
    extension: .md
    format_name: myst
    format_version: 0.13
    jupytext_version: 1.14.5
kernelspec:
  display_name: Python 3 (ipykernel)
  language: python
  name: python3
---

# Summary of important jb concepts

## publish to github pages

Caveat to using gh-pages: `main` (aka `master`) branch in repo must be public. see [](commands.md)

1. Generate toc `jupyter-book toc from-project . > _toc.yml`
1. Remove sections from _toc to be kept private (confidential, sensitive data or private projects)
1. Build book `jb build .`
1. Push to gh-pages `ghp-import -n -p -f _build/html/`

## build whole book to PDF

1. refresh html first by building book from above section
1. then run `jb build . --builder pdfhtml`
1. because running `jb build . --builder pdflatex` means _toc won't be the edited, sanitized version

## build a single page to PDF

1. can do this from website or `jb build <path/to/single-file.ext> --builder pdflatex`

## book vs article

The TOC has a line stating `jb-book` and `jb-article`. 
- How does it know if md is a book or article? 
- How do I format it differently?
- Is it only for the `jb build` command? Using a folder for book and file for article.

- TODO The used terms like Chapters and Sections but then the toc has no chapters but section in newer versions.

## the _toc.yml

- can be autogenerated, but then the `excluded-contents` need to be removed manually
  - TODO Is there a way to auto-exclude like .gitignore and .dockerignore?
  - docs show {toggle} and other directives for {cell} to be toggle-ble or hidden but not for whole chapters and files. Need more research
- or craft it manually each time a new file is created. Tedious process if add multiple files in a day
- TIP rename landing.md to index.md so each 'parent' Section header has some text description to explain its purpose and it's automatically picked up. No need to explicitly include the 'index.md' file in _toc

## the _config.yml

- change `only_build_toc_files : true` (default: false) to exlude any pages (private, or not ready) from _toc and the page would not be included by the `build` script.
- change the `book.tex` entry under `latex` section to the preffered book-name.


## add yaml metadata to MySt notebooks

* single file: `jupyter-book myst init path/to/markdownfile.md`
* all .md files recursively: `jupyter-book myst init ./*/*.md`


## show my linked-brain, or not

```{important}
For graph to work, files need to be connected to each other.

For connections to happen, need to use links (aka references). See #how-to-add-references
```

`ctrl+shitft+p` -> `Show graph`
* (extension:Markdown Links) no double '[[]]' like '[[<filename-in-this-book>]]'
* (alternative md-graph) has '[[]]'

## Why jupyter-book?

* [](jupyterbook-vs)
* [MySt cheatsheet](https://jupyterbook.org/en/stable/reference/cheatsheet.html)

## How to add notes in Margins

[](marginalia.md)

## How to add references

[](jupyterbook-vs.md#ways-of-linking-in-jupyterbook)

## auto-build and deploy upon `git push origin main`

```{topic}
> Can you provide sample code to auto deploy and then build jupyter-book with github actions whenever I push code to - my repo `https://github.com/ellacharmed/today-I-learned/` master branch - located in following path `/home/ubuntu/repos/jupyterbook/today-I-learned` on my local machine - so that the jupyter-book gets build to `_build` subfolder and then published to `https://ellacharmed.github.io/today-I-learned/` ?

```{admonition} BingChat's answer
> To set up a GitHub Action for auto-deployment and building of Jupyter-Book, you can create a new file at `.github/workflows/documentation.yaml` in your repository with the necessary contents to trigger a GitHub Action to rebuild the documentation each time you push to the repository. The documentation can then be pushed to a separate branch called `gh-pages` [^web page context^].

Here is an example `documentation.yaml` file that you can use as a starting point:



```{code-block} python
name: Build and Deploy Jupyter-Book
on:
  push:
    branches:
      - master
jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout
      uses: actions/checkout@v2

    - name: Setup Python
      uses: actions/setup-python@v2
      with:
        python-version: 3.8

    - name: Install dependencies
      run: |
        pip install -r requirements.txt

    - name: Build Jupyter-Book
      run: |
        jupyter-book build /home/ubuntu/repos/jupyterbook/today-I-learned

    - name: Deploy to GitHub Pages
      uses: peaceiris/actions-gh-pages@v3
      with:
        github_token: ${{ secrets.GITHUB_TOKEN }}
        publish_dir: /home/ubuntu/repos/jupyterbook/today-I-learned/_build/html
```
```
```

This workflow file specifies that the action should be triggered on a push to the `master` branch. It checks out the repository, sets up Python, installs dependencies from `requirements.txt`, builds the Jupyter-Book using the `jupyter-book build` command, and deploys the built book to GitHub Pages using the `peaceiris/actions-gh-pages` action.

You can adapt this example to fit your specific needs by changing the paths and commands as necessary. Once you have created and pushed this file to your repository, the action should be triggered automatically on each push to the `master` branch.

Is there anything else you would like to know?

